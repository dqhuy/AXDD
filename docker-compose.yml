version: '3.8'

services:
  # API Gateway
  api-gateway:
    build:
      context: .
      dockerfile: src/ApiGateway/AXDD.ApiGateway/Dockerfile
    ports:
      - "5000:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=http://+:8080
    depends_on:
      - auth-api
      - masterdata-api
      - enterprise-api
      - investment-api
      - filemanager-api
      - report-api
    networks:
      - axdd-network

  # Auth Service
  auth-api:
    build:
      context: .
      dockerfile: src/Services/Auth/AXDD.Services.Auth.Api/Dockerfile
    ports:
      - "5001:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=http://+:8080
    networks:
      - axdd-network

  # MasterData Service
  masterdata-api:
    build:
      context: .
      dockerfile: src/Services/MasterData/AXDD.Services.MasterData.Api/Dockerfile
    ports:
      - "5002:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=http://+:8080
    networks:
      - axdd-network

  # Enterprise Service
  enterprise-api:
    build:
      context: .
      dockerfile: src/Services/Enterprise/AXDD.Services.Enterprise.Api/Dockerfile
    ports:
      - "5003:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=http://+:8080
    networks:
      - axdd-network

  # Investment Service
  investment-api:
    build:
      context: .
      dockerfile: src/Services/Investment/AXDD.Services.Investment.Api/Dockerfile
    ports:
      - "5004:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=http://+:8080
    networks:
      - axdd-network

  # FileManager Service
  filemanager-api:
    build:
      context: .
      dockerfile: src/Services/FileManager/AXDD.Services.FileManager.Api/Dockerfile
    ports:
      - "5005:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=http://+:8080
    networks:
      - axdd-network

  # Report Service
  report-api:
    build:
      context: .
      dockerfile: src/Services/Report/AXDD.Services.Report.Api/Dockerfile
    ports:
      - "5006:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=http://+:8080
    networks:
      - axdd-network

networks:
  axdd-network:
    driver: bridge
